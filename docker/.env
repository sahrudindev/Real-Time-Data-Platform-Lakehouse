# =============================================================================
# ENTERPRISE DATA PLATFORM - ENVIRONMENT CONFIGURATION
# =============================================================================

# -----------------------------------------------------------------------------
# KAFKA CONFIGURATION
# -----------------------------------------------------------------------------
KAFKA_BROKER_ID=1
KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181
KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka:9092,PLAINTEXT_HOST://localhost:29092
KAFKA_LISTENER_SECURITY_PROTOCOL_MAP=PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT
KAFKA_INTER_BROKER_LISTENER_NAME=PLAINTEXT
KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1
KAFKA_TRANSACTION_STATE_LOG_MIN_ISR=1
KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR=1
KAFKA_AUTO_CREATE_TOPICS_ENABLE=false
KAFKA_LOG_RETENTION_HOURS=168
KAFKA_LOG_RETENTION_BYTES=1073741824

# -----------------------------------------------------------------------------
# ZOOKEEPER CONFIGURATION
# -----------------------------------------------------------------------------
ZOOKEEPER_CLIENT_PORT=2181
ZOOKEEPER_TICK_TIME=2000

# -----------------------------------------------------------------------------
# SPARK CONFIGURATION
# -----------------------------------------------------------------------------
SPARK_MASTER_HOST=spark-master
SPARK_MASTER_PORT=7077
SPARK_MASTER_WEBUI_PORT=8080
SPARK_WORKER_CORES=2
SPARK_WORKER_MEMORY=4g
SPARK_DRIVER_MEMORY=2g
SPARK_EXECUTOR_MEMORY=2g
SPARK_MODE=master

# -----------------------------------------------------------------------------
# AIRFLOW CONFIGURATION
# -----------------------------------------------------------------------------
AIRFLOW__CORE__EXECUTOR=CeleryExecutor
AIRFLOW__DATABASE__SQL_ALCHEMY_CONN=postgresql+psycopg2://airflow:airflow@postgres:5432/airflow
AIRFLOW__CELERY__RESULT_BACKEND=db+postgresql://airflow:airflow@postgres:5432/airflow
AIRFLOW__CELERY__BROKER_URL=redis://:@redis:6379/0
AIRFLOW__CORE__FERNET_KEY=dGhpcyBpcyBhIHNhbXBsZSBmZXJuZXQga2V5IGZvciBkZXZlbG9wbWVudA==
AIRFLOW__CORE__DAGS_ARE_PAUSED_AT_CREATION=true
AIRFLOW__CORE__LOAD_EXAMPLES=false
AIRFLOW__API__AUTH_BACKENDS=airflow.api.auth.backend.basic_auth,airflow.api.auth.backend.session
AIRFLOW__SCHEDULER__ENABLE_HEALTH_CHECK=true
AIRFLOW_UID=50000
_AIRFLOW_WWW_USER_USERNAME=admin
_AIRFLOW_WWW_USER_PASSWORD=admin

# -----------------------------------------------------------------------------
# POSTGRES CONFIGURATION (Airflow Metadata DB)
# -----------------------------------------------------------------------------
POSTGRES_USER=airflow
POSTGRES_PASSWORD=airflow
POSTGRES_DB=airflow

# -----------------------------------------------------------------------------
# MINIO CONFIGURATION (S3-Compatible Storage)
# -----------------------------------------------------------------------------
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin123
MINIO_ENDPOINT=http://minio:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin123
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin123
AWS_ENDPOINT_URL=http://minio:9000

# -----------------------------------------------------------------------------
# DATAHUB CONFIGURATION
# -----------------------------------------------------------------------------
DATAHUB_GMS_HOST=datahub-gms
DATAHUB_GMS_PORT=8080
DATAHUB_MYSQL_HOST=datahub-mysql
DATAHUB_MYSQL_PORT=3306
DATAHUB_MYSQL_USER=datahub
DATAHUB_MYSQL_PASSWORD=datahub
DATAHUB_MYSQL_DATABASE=datahub
ELASTICSEARCH_HOST=elasticsearch
ELASTICSEARCH_PORT=9200

# -----------------------------------------------------------------------------
# METABASE CONFIGURATION
# -----------------------------------------------------------------------------
MB_DB_TYPE=postgres
MB_DB_DBNAME=metabase
MB_DB_PORT=5432
MB_DB_USER=metabase
MB_DB_PASS=metabase
MB_DB_HOST=metabase-postgres

# -----------------------------------------------------------------------------
# GRAFANA CONFIGURATION
# -----------------------------------------------------------------------------
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=admin
GF_USERS_ALLOW_SIGN_UP=false
GF_SERVER_ROOT_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# PROMETHEUS CONFIGURATION
# -----------------------------------------------------------------------------
PROMETHEUS_RETENTION_TIME=15d

# -----------------------------------------------------------------------------
# REDIS CONFIGURATION
# -----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# FEATURE STORE CONFIGURATION
# -----------------------------------------------------------------------------
FEAST_REDIS_HOST=redis
FEAST_REDIS_PORT=6379
FEAST_OFFLINE_STORE_TYPE=file
FEAST_ONLINE_STORE_TYPE=redis

# -----------------------------------------------------------------------------
# GREAT EXPECTATIONS CONFIGURATION
# -----------------------------------------------------------------------------
GE_DATA_DOCS_HOST=0.0.0.0
GE_DATA_DOCS_PORT=8088

# -----------------------------------------------------------------------------
# JUPYTER CONFIGURATION
# -----------------------------------------------------------------------------
JUPYTER_TOKEN=enterprise_data_platform
JUPYTER_ENABLE_LAB=yes

# -----------------------------------------------------------------------------
# API CONFIGURATION
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_DEBUG=true
API_RELOAD=true

# -----------------------------------------------------------------------------
# DELTA LAKE CONFIGURATION
# -----------------------------------------------------------------------------
DELTA_LAKE_PATH=/data/delta
DELTA_BRONZE_PATH=/data/delta/bronze
DELTA_SILVER_PATH=/data/delta/silver
DELTA_GOLD_PATH=/data/delta/gold

# -----------------------------------------------------------------------------
# GENERAL CONFIGURATION
# -----------------------------------------------------------------------------
ENVIRONMENT=development
LOG_LEVEL=INFO
TZ=Asia/Jakarta
AIRFLOW_UID=1000
